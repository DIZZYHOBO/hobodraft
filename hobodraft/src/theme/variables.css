:root {
  --ion-color-primary: #6366f1;
  --ion-color-primary-rgb: 99,102,241;
  --ion-color-primary-contrast: #ffffff;
  --ion-color-primary-contrast-rgb: 255,255,255;
  --ion-color-primary-shade: #575ad4;
  --ion-color-primary-tint: #7375f2;

  --ion-color-secondary: #818cf8;
  --ion-color-secondary-rgb: 129,140,248;
  --ion-color-secondary-contrast: #000000;
  --ion-color-secondary-contrast-rgb: 0,0,0;
  --ion-color-secondary-shade: #727bda;
  --ion-color-secondary-tint: #8e98f9;

  --ion-color-danger: #ef4444;
  --ion-color-danger-rgb: 239,68,68;
  --ion-color-danger-contrast: #ffffff;
  --ion-color-danger-contrast-rgb: 255,255,255;
  --ion-color-danger-shade: #d23c3c;
  --ion-color-danger-tint: #f15757;

  --ion-background-color: #0d0d0f;
  --ion-background-color-rgb: 13,13,15;
  --ion-text-color: #f5f5f7;
  --ion-text-color-rgb: 245,245,247;
  --ion-item-background: #1a1a1e;
  --ion-card-background: #1a1a1e;
  --ion-toolbar-background: #1a1a1e;
}

/* ============================================
   DASHBOARD - Script Cards
   ============================================ */

.scripts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 16px;
  margin-top: 16px;
}

.script-card {
  display: flex;
  flex-direction: column;
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.15s, box-shadow 0.15s;
  height: 280px;
}

.script-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.3);
}

.script-card-top {
  flex: 3;
  background: #ffffff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 16px;
  gap: 12px;
}

.script-type-icon { 
  display: flex;
  align-items: center;
  justify-content: center;
}

.script-card-top h3 {
  color: #1a1a1e;
  font-size: 16px;
  font-weight: 600;
  text-align: center;
  margin: 0;
  word-break: break-word;
  line-height: 1.3;
}

.script-card-bottom {
  flex: 1;
  background: #1a1a1e;
  padding: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.script-meta { display: flex; flex-direction: column; gap: 4px; }
.script-type-label { font-size: 12px; font-weight: 600; color: var(--ion-color-primary); }
.script-dates { display: flex; flex-direction: column; gap: 1px; }
.script-dates span { font-size: 10px; color: #a1a1a6; }

.delete-btn {
  background: transparent;
  border: none;
  color: #ef4444;
  padding: 8px;
  cursor: pointer;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.delete-btn:hover { background: rgba(239, 68, 68, 0.1); }

.card-actions {
  display: flex;
  gap: 4px;
}

.edit-btn {
  background: transparent;
  border: none;
  color: #6366f1;
  padding: 8px;
  cursor: pointer;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.edit-btn:hover { background: rgba(99, 102, 241, 0.1); }

/* ============================================
   ADMIN PAGE
   ============================================ */

.admin-stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-bottom: 24px;
}

.admin-stat-card {
  margin: 0;
  text-align: center;
}

.admin-stat-card ion-card-header {
  padding-bottom: 0;
}

.admin-stat-card ion-card-title {
  font-size: 32px;
  font-weight: 700;
}

.admin-stat-card.pending ion-card-title {
  color: #f59e0b;
}

.admin-tabs {
  margin-bottom: 20px;
}

.admin-users-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.empty-state {
  text-align: center;
  padding: 48px 24px;
  color: #a1a1a6;
}

.empty-state p {
  margin-top: 12px;
  font-size: 14px;
}

.admin-user-card {
  background: #1a1a1e;
  border-radius: 12px;
  padding: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.admin-user-card.pending {
  border: 1px solid #f59e0b;
}

.user-info {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.user-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: #333;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.user-avatar ion-icon {
  font-size: 22px;
  color: #a1a1a6;
}

.user-avatar.admin {
  background: linear-gradient(135deg, #6366f1, #818cf8);
}

.user-avatar.admin ion-icon {
  color: white;
}

.user-avatar.pending {
  background: rgba(245, 158, 11, 0.2);
}

.user-avatar.pending ion-icon {
  color: #f59e0b;
}

.user-details {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.user-details h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: #f5f5f7;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.user-details .role-badge {
  display: inline-block;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  padding: 2px 8px;
  border-radius: 4px;
  width: fit-content;
}

.user-details .role-badge.admin {
  background: rgba(99, 102, 241, 0.2);
  color: #818cf8;
}

.user-details .role-badge.user {
  background: rgba(161, 161, 166, 0.2);
  color: #a1a1a6;
}

.user-details .join-date {
  font-size: 12px;
  color: #6a6a6e;
}

.user-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

.approve-btn, .reject-btn, .role-btn, .delete-user-btn {
  border: none;
  padding: 8px 16px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: background 0.15s;
}

.approve-btn {
  background: #22c55e;
  color: white;
}

.approve-btn:hover {
  background: #16a34a;
}

.reject-btn {
  background: #ef4444;
  color: white;
}

.reject-btn:hover {
  background: #dc2626;
}

.role-btn {
  background: #333;
  color: #f5f5f7;
}

.role-btn:hover {
  background: #444;
}

.role-btn.promote {
  background: rgba(99, 102, 241, 0.2);
  color: #818cf8;
}

.role-btn.promote:hover {
  background: rgba(99, 102, 241, 0.3);
}

.role-btn.demote {
  background: rgba(245, 158, 11, 0.2);
  color: #f59e0b;
}

.role-btn.demote:hover {
  background: rgba(245, 158, 11, 0.3);
}

.delete-user-btn {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
  padding: 8px 12px;
}

.delete-user-btn:hover {
  background: rgba(239, 68, 68, 0.2);
}

@media (max-width: 600px) {
  .admin-stats-grid {
    grid-template-columns: 1fr;
  }
  
  .admin-user-card {
    flex-direction: column;
    align-items: stretch;
  }
  
  .user-actions {
    justify-content: flex-end;
    margin-top: 8px;
  }
}

/* Disclaimer Checkbox */
.disclaimer-box {
  margin-top: 20px;
  padding: 16px;
  background: rgba(245, 158, 11, 0.1);
  border: 1px solid rgba(245, 158, 11, 0.3);
  border-radius: 8px;
}

.disclaimer-label {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  cursor: pointer;
}

.disclaimer-checkbox {
  width: 20px;
  height: 20px;
  min-width: 20px;
  margin-top: 2px;
  cursor: pointer;
  accent-color: #6366f1;
}

.disclaimer-text {
  font-size: 13px;
  line-height: 1.5;
  color: #a1a1a6;
}

.disclaimer-text strong {
  color: #f59e0b;
}

.category-selector { margin: 24px 0; }
.category-selector h3 { font-size: 14px; color: #a1a1a6; margin-bottom: 12px; text-align: center; }
.segment-icon { 
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 4px; 
}

/* Dashboard Filter Bar */
.dashboard-filter-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 0;
  margin-bottom: 8px;
}

.filter-select-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  background: #1a1a1e;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #333;
}

.filter-icon {
  color: #a1a1a6;
  font-size: 18px;
}

.filter-select {
  background: transparent;
  border: none;
  color: #f5f5f7;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  outline: none;
  padding-right: 8px;
}

.filter-select option,
.filter-select optgroup {
  background: #1a1a1e;
  color: #f5f5f7;
}

.filter-select optgroup {
  font-weight: 600;
  color: #6366f1;
}

.script-count {
  font-size: 13px;
  color: #6a6a6e;
}

/* Dark Segment for Category Selector */
.dark-segment .dark-segment-container {
  background: #0d0d0f;
  border-radius: 12px;
  padding: 4px;
  border: 1px solid #333;
}

.dark-segment ion-segment {
  --background: transparent;
}

.dark-segment ion-segment-button {
  --background: transparent;
  --background-checked: #6366f1;
  --color: #a1a1a6;
  --color-checked: #ffffff;
  --indicator-color: transparent;
  --border-radius: 8px;
  min-height: 72px;
  margin: 2px;
}

.dark-segment ion-segment-button::part(indicator-background) {
  background: #6366f1;
  border-radius: 8px;
}

.dark-segment ion-segment-button::part(native) {
  border-radius: 8px;
}

/* ============================================
   EDITOR - Header Styles
   ============================================ */

.editor-title-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
  min-width: 0;
  padding: 0 8px;
  overflow: hidden;
}

.editor-title-input {
  background: transparent;
  border: none;
  outline: none;
  color: #f5f5f7;
  font-size: 16px;
  font-weight: 600;
  text-align: center;
  width: 100%;
  max-width: 200px;
  padding: 4px 8px;
  border-radius: 6px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.editor-title-input:focus {
  background: rgba(99, 102, 241, 0.15);
}

.editor-title-input::placeholder {
  color: #6a6a6e;
}

.editor-save-status {
  font-size: 10px;
  color: #6a6a6e;
  margin-top: 2px;
}

/* ============================================
   EDITOR - Common Styles
   ============================================ */

.editor-wrapper {
  display: flex;
  justify-content: center;
  padding: 24px;
  padding-bottom: 80px; /* Space for fixed toolbar */
  min-height: 100%;
  background: var(--ion-background-color);
}

.paper {
  font-family: 'Courier Prime', Courier, monospace;
  font-size: 12pt;
  line-height: 1.5;
  background: #1e1e22;
  color: #f5f5f7;
  padding: 48px;
  width: 100%;
  max-width: 650px;
  min-height: 800px;
  box-shadow: 0 4px 24px rgba(0,0,0,0.4);
}

.el {
  padding: 4px 8px;
  margin-bottom: 8px;
  outline: none;
  min-height: 1.2em;
  white-space: pre-wrap;
  word-wrap: break-word;
  border-radius: 4px;
}

.el:focus { background: rgba(99,102,241,0.15); }

/* ============================================
   SCREENPLAY Elements
   ============================================ */

.paper-screenplay { line-height: 1.1; }
.paper-screenplay .el { padding-bottom: 12px; margin-bottom: 0; }
.el.scene-heading { text-transform: uppercase; font-weight: bold; margin-top: 24px; }
.el.character { text-transform: uppercase; padding-left: 35%; margin-top: 12px; }
.el.dialogue { padding-left: 15%; padding-right: 20%; }
.el.parenthetical { padding-left: 25%; padding-right: 30%; }
.el.parenthetical::before { content: '('; }
.el.parenthetical::after { content: ')'; }
.el.transition { text-transform: uppercase; text-align: right; margin-top: 12px; }

/* ============================================
   POETRY Elements
   ============================================ */

.paper-poetry {
  font-family: Georgia, 'Times New Roman', serif;
  font-size: 14pt;
  line-height: 1.6;
  padding: 60px 80px;
}

.el.poem-title { font-size: 20pt; font-weight: bold; text-align: center; margin-bottom: 24px; }
.el.dedication { font-style: italic; text-align: center; color: #a1a1a6; margin-bottom: 32px; }
.el.verse-indent { padding-left: 40px; }
.el.stanza-break { min-height: 24px; background: transparent !important; }
.el.stanza-break::before { content: '⁂'; display: block; text-align: center; color: #4a4a4e; font-size: 10pt; }
.el.refrain { font-style: italic; color: #a1a1a6; }
.el.attribution { text-align: right; margin-top: 24px; font-style: italic; }
.el.attribution::before { content: '— '; }

/* ============================================
   FICTION Elements
   ============================================ */

.paper-fiction {
  font-family: Georgia, 'Times New Roman', serif;
  font-size: 12pt;
  line-height: 2;
  padding: 48px;
}

.el.chapter-heading { font-size: 18pt; font-weight: bold; text-align: center; margin-top: 48px; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 2px; }
.el.chapter-subtitle { font-size: 12pt; font-style: italic; text-align: center; color: #a1a1a6; margin-bottom: 32px; }
.el.body { text-indent: 1.5em; }
.el.body:first-of-type, .el.chapter-heading + .el.body, .el.chapter-subtitle + .el.body, .el.scene-break + .el.body { text-indent: 0; }
.paper-fiction .el.dialogue { text-indent: 1.5em; padding-left: 0; padding-right: 0; }
.paper-fiction .el.dialogue::before { content: '"'; }
.paper-fiction .el.dialogue::after { content: '"'; }
.el.thought { font-style: italic; text-indent: 1.5em; }
.el.scene-break { text-align: center; margin: 24px 0; min-height: 24px; }
.el.scene-break::before { content: '#'; color: #6a6a6e; }
.el.letter { font-family: 'Courier Prime', Courier, monospace; font-size: 11pt; background: rgba(255,255,255,0.03); padding: 16px 24px; margin: 16px 32px; border-left: 3px solid #4a4a4e; }
.el.section-header { font-size: 14pt; font-weight: bold; text-align: center; margin-top: 64px; margin-bottom: 32px; text-transform: uppercase; letter-spacing: 4px; border-top: 1px solid #4a4a4e; border-bottom: 1px solid #4a4a4e; padding: 16px 0; }

/* ============================================
   TOOLBAR - Floating above keyboard
   ============================================ */

.editor-toolbar-container {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: #1a1a1e;
  border-top: 1px solid #2a2a2e;
  z-index: 1000;
  padding-bottom: env(safe-area-inset-bottom, 0);
  transition: bottom 0.1s ease-out;
}

.toolbar-buttons { display: flex; justify-content: space-around; padding: 8px 4px; gap: 4px; overflow-x: auto; }

.toolbar-btn {
  flex: 1;
  min-width: 50px;
  padding: 12px 6px;
  background: #242428;
  border: none;
  border-radius: 8px;
  color: #a1a1a6;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  white-space: nowrap;
}

.toolbar-btn:active { background: var(--ion-color-primary); color: white; }
.toolbar-btn.active { background: var(--ion-color-primary); color: white; }

.toolbar-btn-new {
  background: #22c55e !important;
  color: white !important;
  font-size: 18px !important;
  font-weight: bold;
  min-width: 44px !important;
  flex: 0 0 44px !important;
}

.toolbar-btn-new:active {
  background: #16a34a !important;
}

/* ============================================
   DOCUMENT CHECKER
   ============================================ */

.checker-success {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  text-align: center;
}

.checker-success ion-icon { font-size: 64px; color: #22c55e; margin-bottom: 16px; }
.checker-success h2 { margin: 0 0 8px 0; font-size: 24px; color: #f5f5f7; }
.checker-success p { margin: 0; color: #a1a1a6; font-size: 15px; }

.checker-results { padding-bottom: 24px; }
.checker-summary { display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap; }
.checker-note { font-size: 13px; color: #8a8a8e; margin: 0 0 20px 0; padding: 12px; background: rgba(99, 102, 241, 0.1); border-radius: 8px; border-left: 3px solid var(--ion-color-primary); }
.checker-issues { display: flex; flex-direction: column; gap: 12px; }

.checker-issue { background: #1a1a1e; border-radius: 12px; padding: 16px; border-left: 4px solid #6a6a6e; }
.checker-issue-warning { border-left-color: #f59e0b; }
.checker-issue-suggestion { border-left-color: #818cf8; }

.issue-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.issue-header ion-icon { font-size: 18px; }
.checker-issue-warning .issue-header ion-icon { color: #f59e0b; }
.checker-issue-suggestion .issue-header ion-icon { color: #818cf8; }
.issue-title { font-weight: 600; font-size: 15px; color: #f5f5f7; flex: 1; }
.issue-detail { font-size: 14px; color: #a1a1a6; margin: 0 0 12px 0; line-height: 1.5; }
.issue-actions { display: flex; gap: 8px; }
.issue-actions ion-button { --padding-start: 12px; --padding-end: 12px; }

.el.highlight-issue { animation: highlightPulse 2s ease-out; }

@keyframes highlightPulse {
  0% { background: rgba(245, 158, 11, 0.4); box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.3); }
  100% { background: transparent; box-shadow: none; }
}

/* ============================================
   HELP MODAL
   ============================================ */

.help-content { max-width: 600px; margin: 0 auto; }
.help-intro { font-size: 15px; line-height: 1.6; color: #a1a1a6; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid #2a2a2e; }
.help-elements { display: flex; flex-direction: column; gap: 20px; }
.help-element { background: #1a1a1e; border-radius: 12px; padding: 16px; border-left: 4px solid var(--ion-color-primary); }
.help-element-header { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
.help-element-badge { background: var(--ion-color-primary); color: white; font-size: 11px; font-weight: 600; padding: 4px 8px; border-radius: 4px; text-transform: uppercase; }
.help-element-header h3 { margin: 0; font-size: 16px; font-weight: 600; color: #f5f5f7; }
.help-element-desc { font-size: 14px; line-height: 1.5; color: #c1c1c6; margin: 0 0 12px 0; }
.help-element-example { background: #0d0d0f; border-radius: 8px; padding: 12px; display: flex; flex-direction: column; gap: 4px; }
.example-label { font-size: 11px; text-transform: uppercase; color: #6a6a6e; font-weight: 600; }
.help-element-example code { font-family: 'Courier Prime', Courier, monospace; font-size: 13px; color: #818cf8; white-space: pre-wrap; word-break: break-word; }
.help-tips { margin-top: 32px; padding-top: 24px; border-top: 1px solid #2a2a2e; }
.help-tips h3 { font-size: 18px; margin: 0 0 16px 0; color: #f5f5f7; }
.help-tips ul { list-style: none; padding: 0; margin: 0; }
.help-tips li { font-size: 14px; line-height: 1.6; color: #c1c1c6; padding: 8px 0; border-bottom: 1px solid #1a1a1e; }
.help-tips li:last-child { border-bottom: none; }
.help-tips li strong { color: var(--ion-color-primary); font-weight: 600; }

/* ============================================
   EXPORT MODAL
   ============================================ */

.export-modal {
  max-width: 500px;
  margin: 0 auto;
}

.export-modal ion-item {
  --background: #1a1a1e;
  margin-bottom: 20px;
  border-radius: 8px;
}

.export-format-section {
  margin-top: 24px;
}

.export-format-section h3 {
  font-size: 14px;
  color: #a1a1a6;
  margin: 0 0 12px 0;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.export-format-section ion-item {
  --background: #1a1a1e;
  margin-bottom: 8px;
  border-radius: 8px;
}

.export-format-section ion-item h2 {
  font-size: 16px;
  font-weight: 600;
  color: #f5f5f7;
  margin: 0 0 4px 0;
}

.export-format-section ion-item p {
  font-size: 13px;
  color: #8a8a8e;
  margin: 0;
}

/* ============================================
   MOBILE RESPONSIVE
   ============================================ */

@media (max-width: 576px) {
  .editor-wrapper { padding: 16px; padding-bottom: 80px; }
  .paper { padding: 24px; min-height: auto; }
  .paper-poetry { padding: 24px; }
  .paper-fiction { padding: 24px; }
  .el.character { padding-left: 20%; }
  .el.dialogue { padding-left: 5%; padding-right: 5%; }
  .el.parenthetical { padding-left: 10%; padding-right: 10%; }
  .el.letter { margin: 16px 8px; padding: 12px 16px; }
  .toolbar-btn { padding: 14px 4px; font-size: 10px; min-width: 40px; }
  .scripts-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
  .script-card { height: 240px; }
  .script-card-top h3 { font-size: 14px; }
  .help-element { padding: 12px; }
  .help-element-header { flex-direction: column; align-items: flex-start; gap: 8px; }
  .checker-issue { padding: 12px; }
  .issue-actions { flex-direction: column; }
  .issue-actions ion-button { width: 100%; }
  
  /* Editor header mobile adjustments */
  .editor-title-input {
    font-size: 14px;
    max-width: 140px;
  }
  
  .editor-toolbar-container {
    padding: 4px 0;
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
  @page { size: letter; margin: 1in; }
  * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  body, ion-app, .editor-wrapper { background: white !important; }
  .paper { background: white !important; color: black !important; padding: 0 !important; max-width: none !important; box-shadow: none !important; width: 100% !important; }
  .el { color: black !important; background: none !important; }
  .el:focus { background: none !important; }
  .paper-screenplay .el.scene-heading { page-break-after: avoid; }
  .paper-screenplay .el.character { page-break-after: avoid; }
  .paper-poetry { padding: 0 !important; }
  .paper-fiction .el.chapter-heading { page-break-before: always; }
  .paper-fiction .el.chapter-heading:first-child { page-break-before: avoid; }
  .el.scene-break { page-break-after: avoid; }
  ion-header, ion-footer, ion-tab-bar, ion-fab, ion-toolbar, .toolbar-buttons, IonBackButton { display: none !important; }
}

/* ============================================
   DASHBOARD - Stats Banner
   ============================================ */

.stats-banner {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px 16px;
  background: #1a1a1e;
  border-radius: 12px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #a1a1a6;
}

.stat-item ion-icon { font-size: 16px; }
.stat-item .stat-number { font-weight: 700; color: #f5f5f7; }
.stat-item.streak { color: #f59e0b; }
.stat-item.streak ion-icon { color: #f59e0b; }
.stat-item.today { color: #22c55e; }

/* ============================================
   DASHBOARD - Folders Bar
   ============================================ */

.folders-bar {
  display: flex;
  gap: 8px;
  padding: 8px 0;
  margin-bottom: 8px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.folder-chip {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: #1a1a1e;
  border: 1px solid #333;
  border-radius: 20px;
  color: #a1a1a6;
  font-size: 13px;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s;
}

.folder-chip:hover { border-color: #6366f1; }
.folder-chip.active { background: #6366f1; border-color: #6366f1; color: white; }
.folder-chip ion-icon { font-size: 16px; }
.folder-chip .folder-count { 
  background: rgba(255,255,255,0.2); 
  padding: 2px 6px; 
  border-radius: 10px; 
  font-size: 11px; 
}
.folder-chip .folder-delete {
  margin-left: 4px;
  font-size: 16px;
  opacity: 0.5;
  cursor: pointer;
}
.folder-chip .folder-delete:hover { opacity: 1; color: #ef4444; }
.folder-chip.add-folder { border-style: dashed; }
.folder-chip.add-folder:hover { background: rgba(99, 102, 241, 0.1); }

.word-count-badge {
  font-size: 11px;
  color: #6a6a6e;
  margin-top: 4px;
}

/* ============================================
   SEARCH - Dashboard & Editor
   ============================================ */

.search-results {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 16px;
}

.search-result {
  background: #1a1a1e;
  padding: 16px;
  border-radius: 12px;
  cursor: pointer;
  transition: background 0.15s;
}

.search-result:hover { background: #242428; }

.search-result-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.search-result-header strong { color: #f5f5f7; }

.search-match {
  font-size: 13px;
  color: #a1a1a6;
  margin: 4px 0;
  padding-left: 28px;
}

.search-nav {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 16px;
  padding: 12px;
  background: #1a1a1e;
  border-radius: 8px;
}

/* ============================================
   THEMES
   ============================================ */

.themes-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

.theme-card {
  padding: 24px;
  border-radius: 12px;
  border: 2px solid transparent;
  cursor: pointer;
  text-align: center;
  transition: all 0.15s;
}

.theme-card:hover { border-color: #6366f1; transform: scale(1.02); }
.theme-name { font-size: 14px; font-weight: 600; display: block; margin-bottom: 8px; }
.theme-preview { font-size: 24px; font-family: Georgia, serif; }

/* Theme variants */
body[data-theme="light"] { --ion-background-color: #ffffff; --ion-text-color: #1a1a1e; --ion-item-background: #f5f5f5; --ion-card-background: #f5f5f5; --ion-toolbar-background: #f5f5f5; }
body[data-theme="sepia"] { --ion-background-color: #f4ecd8; --ion-text-color: #5c4b37; --ion-item-background: #efe6d5; --ion-card-background: #efe6d5; --ion-toolbar-background: #efe6d5; }
body[data-theme="midnight"] { --ion-background-color: #1a1a2e; --ion-text-color: #eaeaea; --ion-item-background: #25253a; --ion-card-background: #25253a; --ion-toolbar-background: #25253a; }

/* ============================================
   STATS MODAL
   ============================================ */

.stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.stats-card {
  background: #1a1a1e;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
}

.stats-card h2 { margin: 0 0 4px; font-size: 28px; color: #6366f1; }
.stats-card p { margin: 0; font-size: 13px; color: #a1a1a6; }

.activity-chart {
  display: flex;
  align-items: flex-end;
  justify-content: space-around;
  height: 120px;
  background: #1a1a1e;
  border-radius: 12px;
  padding: 16px;
  margin-top: 12px;
}

.activity-bar-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.activity-bar {
  width: 24px;
  background: linear-gradient(to top, #6366f1, #818cf8);
  border-radius: 4px 4px 0 0;
  min-height: 4px;
}

.activity-day { font-size: 10px; color: #6a6a6e; }

/* Dialogue distribution */
.dialogue-chart { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
.dialogue-bar-row { display: flex; align-items: center; gap: 8px; }
.char-name { width: 80px; font-size: 12px; color: #a1a1a6; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.dialogue-bar-bg { flex: 1; height: 20px; background: #1a1a1e; border-radius: 4px; overflow: hidden; }
.dialogue-bar-fill { height: 100%; background: linear-gradient(to right, #6366f1, #818cf8); border-radius: 4px; }
.char-pct { width: 40px; font-size: 12px; color: #6a6a6e; text-align: right; }

/* Poetry stats */
.rhyme-scheme { font-family: monospace; font-size: 24px; letter-spacing: 4px; color: #6366f1; }
.syllable-list { display: flex; flex-direction: column; gap: 4px; }
.syllable-row { display: flex; justify-content: space-between; padding: 8px 12px; background: #1a1a1e; border-radius: 6px; font-size: 13px; }

/* Chapter stats */
.chapter-list { display: flex; flex-direction: column; gap: 8px; }
.chapter-row { display: flex; justify-content: space-between; padding: 12px; background: #1a1a1e; border-radius: 8px; cursor: pointer; }
.chapter-row:hover { background: #242428; }

/* ============================================
   COMMENTS
   ============================================ */

.comment-add { padding: 16px; background: #1a1a1e; border-radius: 12px; }
.comment-add h4 { margin: 0 0 12px; font-size: 14px; color: #a1a1a6; }
.comment-colors { display: flex; gap: 8px; margin: 12px 0; }
.color-btn { width: 32px; height: 32px; border-radius: 50%; border: 2px solid transparent; cursor: pointer; }
.color-btn.active { border-color: white; transform: scale(1.1); }

.comments-list { display: flex; flex-direction: column; gap: 12px; }
.comment-card { background: #1a1a1e; border-radius: 8px; padding: 12px; border-left: 4px solid yellow; }
.comment-card.resolved { opacity: 0.5; }
.comment-context { font-size: 12px; color: #6a6a6e; margin: 0 0 8px; font-style: italic; }
.comment-text { font-size: 14px; color: #f5f5f7; margin: 0 0 12px; }
.comment-actions { display: flex; gap: 8px; }
.comment-actions button { background: #242428; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; color: #a1a1a6; cursor: pointer; }
.comment-actions button:hover { background: #333; color: #f5f5f7; }

.element-wrapper { position: relative; }
.element-wrapper.has-comment { background: rgba(255, 255, 0, 0.05); }
.comment-indicator { position: absolute; right: -20px; top: 50%; transform: translateY(-50%); width: 12px; height: 12px; border-radius: 50%; }
.syllable-count { position: absolute; right: -50px; top: 50%; transform: translateY(-50%); font-size: 10px; color: #6a6a6e; }

/* ============================================
   VERSIONS
   ============================================ */

.version-create { padding: 16px; background: #1a1a1e; border-radius: 12px; }
.versions-list { display: flex; flex-direction: column; gap: 12px; }
.version-card { display: flex; justify-content: space-between; align-items: center; background: #1a1a1e; padding: 12px 16px; border-radius: 8px; }
.version-info { display: flex; flex-direction: column; gap: 4px; }
.version-info strong { color: #f5f5f7; }
.version-info span { font-size: 12px; color: #6a6a6e; }
.version-actions { display: flex; gap: 8px; }
.version-actions button { background: #242428; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; color: #a1a1a6; cursor: pointer; }
.version-actions button:hover { background: #6366f1; color: white; }

/* ============================================
   SHARING
   ============================================ */

.share-active { text-align: center; }
.share-status { margin-bottom: 24px; }
.share-status h3 { margin: 12px 0 4px; color: #f5f5f7; }
.share-status p { margin: 0; color: #a1a1a6; }
.share-link-box { display: flex; align-items: center; gap: 8px; background: #1a1a1e; padding: 12px; border-radius: 8px; margin-bottom: 24px; }
.share-link-box code { flex: 1; font-size: 12px; color: #6366f1; word-break: break-all; }

.share-options h3 { margin: 0 0 8px; }
.share-options p { color: #a1a1a6; margin: 0 0 24px; }
.share-option-btn { display: flex; align-items: center; gap: 16px; width: 100%; padding: 16px; background: #1a1a1e; border: 1px solid #333; border-radius: 12px; cursor: pointer; text-align: left; margin-bottom: 12px; color: #f5f5f7; }
.share-option-btn:hover { border-color: #6366f1; background: rgba(99,102,241,0.1); }
.share-option-btn ion-icon { font-size: 24px; color: #6366f1; }
.share-option-btn strong { display: block; margin-bottom: 4px; }
.share-option-btn p { margin: 0; font-size: 13px; color: #a1a1a6; }

/* ============================================
   OUTLINE
   ============================================ */

.outline-list { display: flex; flex-direction: column; gap: 4px; }
.outline-item { display: flex; align-items: center; gap: 12px; padding: 12px; background: #1a1a1e; border: none; border-radius: 8px; cursor: pointer; text-align: left; width: 100%; color: #f5f5f7; }
.outline-item:hover { background: #242428; }
.outline-number { width: 28px; height: 28px; background: #6366f1; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; flex-shrink: 0; }
.outline-text { font-size: 14px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* ============================================
   FOCUS MODE
   ============================================ */

.focus-mode ion-header { display: none; }
.focus-mode .editor-toolbar-container { display: none; }
.focus-mode .editor-stats-bar { display: none; }
.focus-mode-stats { position: fixed; top: 16px; right: 16px; background: rgba(0,0,0,0.7); padding: 8px 16px; border-radius: 20px; z-index: 100; }

/* ============================================
   AUTOCOMPLETE
   ============================================ */

.autocomplete-dropdown {
  position: fixed;
  background: #1a1a1e;
  border: 1px solid #333;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  z-index: 1001;
  max-width: 300px;
  margin-top: -60px;
  margin-left: 100px;
}

.autocomplete-item {
  padding: 10px 16px;
  cursor: pointer;
  font-size: 14px;
  color: #a1a1a6;
}

.autocomplete-item:hover, .autocomplete-item.active {
  background: #6366f1;
  color: white;
}

.autocomplete-item:first-child { border-radius: 8px 8px 0 0; }
.autocomplete-item:last-child { border-radius: 0 0 8px 8px; }

/* ============================================
   SHORTCUTS
   ============================================ */

.shortcuts-list { display: flex; flex-direction: column; gap: 8px; }
.shortcut-row { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #1a1a1e; border-radius: 8px; }
.shortcut-row kbd { background: #0d0d0f; padding: 4px 10px; border-radius: 6px; font-family: monospace; font-size: 13px; color: #6366f1; border: 1px solid #333; }
.shortcut-row span { color: #a1a1a6; font-size: 14px; }

/* ============================================
   EXPORT
   ============================================ */

.export-options { display: flex; flex-direction: column; gap: 12px; }
.export-btn { display: flex; align-items: center; gap: 16px; padding: 16px; background: #1a1a1e; border: 1px solid #333; border-radius: 12px; cursor: pointer; text-align: left; width: 100%; color: #f5f5f7; }
.export-btn:hover { border-color: #6366f1; background: rgba(99,102,241,0.1); }
.export-icon { font-size: 28px; }
.export-btn strong { display: block; margin-bottom: 4px; }
.export-btn p { margin: 0; font-size: 13px; color: #a1a1a6; }

/* ============================================
   SHARED VIEW
   ============================================ */

.shared-banner {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px 24px;
  background: #1a1a1e;
  border-bottom: 1px solid #333;
}

.share-mode-badge {
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

.share-mode-badge.read { background: rgba(99,102,241,0.2); color: #818cf8; }
.share-mode-badge.edit { background: rgba(34,197,94,0.2); color: #22c55e; }
.saving-indicator { color: #f59e0b; font-size: 13px; }

/* ============================================
   EDITOR STATS BAR
   ============================================ */

.editor-stats-bar {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 8px 24px;
  background: #0d0d0f;
  border-bottom: 1px solid #1a1a1e;
  font-size: 13px;
  color: #6a6a6e;
}

.stats-detail-btn {
  margin-left: auto;
  background: none;
  border: 1px solid #333;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  color: #a1a1a6;
  cursor: pointer;
}

.stats-detail-btn:hover { border-color: #6366f1; color: #6366f1; }

/* Badge for comments count */
.badge {
  position: absolute;
  top: 4px;
  right: 4px;
  background: #ef4444;
  color: white;
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 10px;
  font-weight: 600;
}

/* Custom Modal Overlay (replaces IonModal to avoid bugs) */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  padding: 20px;
}

.modal-content {
  background: #1a1a1e;
  border-radius: 16px;
  max-width: 500px;
  width: 100%;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.modal-content.modal-large {
  max-width: 600px;
  max-height: 85vh;
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #333;
}

.modal-header h2 {
  margin: 0;
  font-size: 18px;
  color: #f5f5f7;
}

.modal-close {
  background: none;
  border: none;
  color: #a1a1a6;
  font-size: 24px;
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-close:hover {
  color: #f5f5f7;
}

.modal-body {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

/* Category buttons in new script modal */
.category-buttons {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}

.category-buttons button {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px;
  background: #242428;
  border: 2px solid transparent;
  border-radius: 12px;
  color: #a1a1a6;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.category-buttons button:hover {
  border-color: #6366f1;
}

.category-buttons button.active {
  background: rgba(99, 102, 241, 0.2);
  border-color: #6366f1;
  color: #f5f5f7;
}

/* Native Form Elements */
.form-group {
  margin-bottom: 16px;
}

.form-group label {
  display: block;
  margin-bottom: 6px;
  color: #a1a1a6;
  font-size: 13px;
}

.form-input,
.form-select,
.form-textarea {
  width: 100%;
  padding: 12px 14px;
  background: #242428;
  border: 1px solid #333;
  border-radius: 8px;
  color: #f5f5f7;
  font-size: 15px;
  outline: none;
  transition: border-color 0.15s;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
  border-color: #6366f1;
}

.form-select {
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23a1a1a6' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 36px;
}

.form-textarea {
  resize: vertical;
  min-height: 80px;
  font-family: inherit;
}

.btn-primary {
  width: 100%;
  padding: 14px;
  background: #6366f1;
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s;
}

.btn-primary:hover {
  background: #5558e3;
}

.btn-primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-secondary {
  width: 100%;
  padding: 12px;
  background: transparent;
  border: 1px solid #6366f1;
  border-radius: 8px;
  color: #6366f1;
  font-size: 14px;
  cursor: pointer;
}

.btn-secondary:hover {
  background: rgba(99, 102, 241, 0.1);
}

.btn-danger {
  width: 100%;
  padding: 14px;
  background: #ef4444;
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
}

.btn-danger:hover {
  background: #dc2626;
}

.btn-small {
  padding: 6px 12px;
  background: #242428;
  border: 1px solid #333;
  border-radius: 6px;
  color: #f5f5f7;
  font-size: 13px;
  cursor: pointer;
}

.btn-small:hover {
  background: #333;
}

/* Help section styling */
.help-section {
  margin-bottom: 24px;
  padding-bottom: 24px;
  border-bottom: 1px solid #1a1a1e;
}

.help-section:last-child { border-bottom: none; }
.help-section h3 { display: flex; align-items: center; gap: 8px; margin: 0 0 12px; color: #f5f5f7; }
.help-section ul { margin: 0; padding-left: 20px; }
.help-section li { margin-bottom: 8px; color: #a1a1a6; font-size: 14px; }
.help-section li strong { color: #6366f1; }
